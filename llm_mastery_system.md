# TL Codex 마스터리 빌더 LLM 연동 시스템

## 1. 수집된 데이터 활용 방안

### 1.1. 마스터리 시스템 데이터베이스
- **스킬 데이터**: 10,000+ 스킬의 레벨별 상세 스탯 정보
- **스탯 매핑**: 각 스탯 ID와 실제 게임 내 의미 매핑
- **빌드 타입**: PvE, PvP, 던전, 레이드 등 7가지 빌드 분류

### 1.2. LLM 연동을 위한 데이터 구조화

#### A. 스킬 데이터 정규화
```json
{
  "skill_id": "10113",
  "name": "스킬명",
  "max_level": 10,
  "stat_effects": {
    "1": {"mana": 19, "intelligence": 3},
    "2": {"mana": 38, "intelligence": 6},
    "10": {"mana": 192, "intelligence": 30}
  },
  "build_types": ["pve", "pvp"],
  "weapon_requirements": ["staff", "wand"]
}
```

#### B. 스탯 ID 매핑 테이블
```json
{
  "163": "마나",
  "126": "치명타 확률", 
  "143": "공격력 (주무기)",
  "144": "공격력 (보조무기)",
  "145": "공격력 (원거리)",
  "125": "마나 소모량",
  "161": "지능",
  "155": "힘",
  "156": "체력",
  "157": "민첩",
  "158": "지각",
  "159": "정신력"
}
```

## 2. LLM 추천 시스템 구현

### 2.1. 사용자 입력 처리
```
사용자: "나는 레벨 55 지팡이+단검 PvP 딜러인데, 마스터리 포인트를 어떻게 분배해야 할까?"
```

### 2.2. RAG 기반 검색
1. **사용자 프로필 파싱**
   - 레벨: 55
   - 무기 조합: 지팡이 + 단검
   - 역할: PvP 딜러
   - 목표: 마스터리 포인트 최적화

2. **관련 스킬 검색**
   - 지팡이 관련 스킬 필터링
   - 단검 관련 스킬 필터링
   - PvP에 적합한 스킬 우선순위

3. **마스터리 포인트 계산**
   - 레벨 55에서 사용 가능한 총 포인트
   - 스킬별 포인트 비용 계산
   - 최적 조합 추천

### 2.3. LLM 응답 생성
```
**마스터리 포인트 분배 추천**

레벨 55에서 사용 가능한 마스터리 포인트: 200점

**지팡이 마스터리 (120점)**
- 화염 폭발 (레벨 10): 100점
  - 효과: 공격력 +72, 치명타 확률 +36%
  - PvP에서 높은 순간 데미지 제공
- 마나 효율성 (레벨 5): 20점
  - 효과: 마나 소모량 -25%
  - 지속적인 딜링을 위한 필수

**단검 마스터리 (80점)**
- 그림자 습격 (레벨 8): 60점
  - 효과: 공격력 +57.6, 이동속도 +28.8%
  - PvP에서 기동성과 데미지 동시 확보
- 독성 공격 (레벨 5): 20점
  - 효과: 지속 데미지 +36, 방어력 무시 +18%
  - 상대방 회복력 억제 효과

**예상 성능 향상**
- 전체 공격력: +129.6%
- 치명타 확률: +36%
- 마나 효율성: +25% 개선
- 이동속도: +28.8%

이 분배는 PvP 환경에서 높은 순간 데미지와 기동성을 동시에 확보하는 최적의 조합입니다.
```

## 3. 시스템 아키텍처

### 3.1. 데이터 처리 파이프라인
```
TL Codex 데이터 수집 → 스킬 데이터 정규화 → 벡터 데이터베이스 구축 → RAG 검색 → LLM 추천 생성
```

### 3.2. 핵심 컴포넌트
1. **데이터 수집기**: TL Codex에서 실시간 데이터 수집
2. **데이터 정규화기**: 스킬 데이터를 LLM이 이해할 수 있는 형태로 변환
3. **벡터 데이터베이스**: 스킬 검색을 위한 임베딩 저장
4. **RAG 검색 엔진**: 사용자 쿼리에 맞는 스킬 검색
5. **LLM 추천 엔진**: 개인화된 마스터리 빌드 추천

### 3.3. API 엔드포인트
```
POST /api/mastery/recommend
{
  "user_profile": {
    "level": 55,
    "weapons": ["staff", "dagger"],
    "build_type": "pvp",
    "role": "dps"
  }
}

Response:
{
  "recommendation": "마스터리 포인트 분배 추천...",
  "skill_breakdown": [...],
  "expected_improvements": {...}
}
```

## 4. 구현 단계

### Phase 1: 데이터 정규화
- [ ] 스킬 데이터 파싱 및 정규화
- [ ] 스탯 ID 매핑 테이블 구축
- [ ] 빌드 타입별 스킬 분류

### Phase 2: RAG 시스템 구축
- [ ] 벡터 데이터베이스 설정
- [ ] 스킬 임베딩 생성
- [ ] 검색 엔진 구현

### Phase 3: LLM 연동
- [ ] 프롬프트 엔지니어링
- [ ] 추천 로직 구현
- [ ] 응답 포맷팅

### Phase 4: API 및 프론트엔드
- [ ] REST API 구현
- [ ] 웹 인터페이스 개발
- [ ] 실시간 업데이트 시스템

## 5. 기대 효과

### 5.1. 사용자 경험
- **개인화된 추천**: 사용자의 레벨, 무기, 목표에 맞는 최적화된 마스터리 빌드
- **상세한 근거**: 각 스킬 선택의 이유와 예상 효과 제시
- **실시간 계산**: 포인트 분배에 따른 능력치 변화 실시간 계산

### 5.2. 게임 이해도 향상
- **메타 분석**: 현재 인기 있는 빌드와 트렌드 분석
- **시너지 효과**: 스킬 간의 시너지와 상호작용 설명
- **밸런스 정보**: 각 스킬의 장단점과 사용 상황 안내

이 시스템을 통해 TL 플레이어들이 더욱 효율적이고 전략적인 마스터리 빌드를 구성할 수 있게 됩니다.
